The Notices and Disclaimers for Ocean Worlds Autonomy Testbed for Exploration
Research and Simulation can be found in README.md in the root directory of
this repository.

ow_power_system
===============
It creates a node called power_system_node, which listens for power consumption
in a topic called power_draw, publishes the estimated state of charge (SOC)
in a topic called state_of_charge, and published the estimated remaining useful life (RUL) in seconds. 

Currently, the state_of_charge topic publishes the next voltage and RUL value in a csv generated by the battery model described in the OceanWATERS documentation every one second or ten seconds, depending on the power draw csv used.

The SOC value will fluctuate realistically, but the RUL value currently outputs an uncharacteristically accurate value. This is due to issues with data formatting, so please be aware that RUL would ordinarily fluctuate, with the predicted value becoming more accurate closer to EOD (end of discharge).

Once the publisher hits the end of the csv, it continues to publish the final voltage value indefinitely.

This node can be launched using the format:
```xml
<arg name="power_draw_csv_file" default="onewatt.csv"/>  <!-- options: onewatt.csv, eightwatt.csv, sixteenwatt.csv -->
<arg name="power_update_rate" default="0.1"/>  <!-- Use 0.1 Hz for onewatt.csv, 1 Hz for the two other options -->

<node name="power_system_node" pkg="ow_power_system" type="power_system_node">
    <param name="power_draw_csv_path" value="$(find ow_power_system)/data/$(arg power_draw_csv_file)"/>
    <param name="power_update_rate" value="$(arg power_update_rate)"/>
</node>
```

There are three options for power draw levels: 1W (low power consumption), 8W (moderate power consumption), and 16W (high power consumption, intended to indicate a fault). To select which to use, the `power_draw_csv_file` argument can be altered to `onewatt.csv`, `eightwatt.csv`, or `sixteenwatt.csv`.  
  
**SPECS:**  
onewatt.csv  
Voltage range: 4.192V to 2.616V  
Update interval: 10 seconds  
Useful life: 28550s  
  
eightwatt.csv  
Voltage range: 4.192V to 2.588V  
Update interval: 1 second  
Useful life: 3142s  
  
sixteenwatt.csv  
Voltage range: 4.192V to 2.587V  
Update interval: 1 second  
Useful life: 1330s  
